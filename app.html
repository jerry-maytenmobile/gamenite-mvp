<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameNite.App</title>
    <script src="https://unpkg.com/vue@next"></script>
  </head>
  <body>
    <div id="app">
      <infobar v-bind:infobarmsg="infobarmsg">
        <!-- text info on current state of game - whose turn and what to do next -->
      </infobar>

      <div id="playertopbar">
        <!-- video div element, and player caption (P.CAP.) element for each player
             P.CAP. element: player name, score, high-level game info.
             press-and-hold to see detailed player info               -->
        <playervideo></playervideo>
        <playercaption></playercaption>
      </div>

      <div id="gamearea">
        <!-- game board in the center, player hand towards the bottom -->
        <gameboard></gameboard>
        <playerhand v-bind:gamestate="gamestate"></playerhand>
      </div>

      <controlbar @playgame="changestate_playgame">
        <!-- very bottom contains controls for video/audio, settings,... -->
      </controlbar>
    </div>

    <script type="text/javascript">
      let app = Vue.createApp({
        data(){
          return {
            // for info bar
            infobarmsg: 'Lets play Dixet!',
            // for video
            isMuted: false,
            isVideo: true,
            // for player caption
            numPlayers: 1,
            playerNames: ['Host'],
            playerScores: [0],
            // for game board
            centerImgArray: [''],
            // for player hands
            playerHands: [['']],
            // game state
            gamestate: 'setup',
            // for control bar
            playButtonActive: true
          };
        },
//        computed: {
//
//        },
        methods: {
          changestate_playgame(){
            if(this.playButtonActive){
              this.gamestate = 'playerchoosecard';
              this.infobarmsg = "Active player chooses card and gives clue. Then other players choose a card.";
              this.playButtonActive = false;
            }
          }
        },
//        created(){
//
//        },
      });

      app.component('infobar', {
        props: ['infobarmsg'],
        template: `<div :style="styleobject"><p>{{infobarmsg}}</p></div>`,
        data(){
          return {
            styleobject: {
              color: 'black',
              backgroundColor: 'lightgrey',
              width: '100%',
              textAlign: 'center',
              padding: '0.5px',
              fontWeight: 'bold'
            }
          }
        }
      });
      app.component('playervideo', {
        props: [],
        template: `<div :style="styleobject"><p>Player Video here</p></div>`,
        data(){
          return {
            styleobject: {
              color: 'red',
              width: '100%'
            }
          }
        }
      });
      app.component('playercaption',{
        props: ['gamestate'],
        template: `<div :style="styleobject"><p>Player Caption here</p></div>`,
        data(){
          return {
            styleobject: {
              color: 'green',
              width: '100%'
            }
          }
        }
      });
//      app.component('gamearea', {
//        props: [],
//        template: `<span></span>`,
//      });
      app.component('gameboard', {
        props: [],
        template: `<div><p>Game Board Here </p></div>`,
      });
      app.component('playerhand', {
        props: ['gamestate'],
        template: `<div v-if="gamestate==='playerchoosecard'"><img src="assets/dixet1.jpg" alt="img here" :style="playercardstyle" ></img><img src="assets/dixet2.jpg" alt="img here" :style="playercardstyle" ></img><img src="assets/dixet3.jpg" alt="img here" :style="playercardstyle" ></img><img src="assets/dixet4.jpg" alt="img here" :style="playercardstyle" ></img><img src="assets/dixet5.jpg" alt="img here" :style="playercardstyle" ></img><img src="assets/dixet6.jpg" alt="img here" :style="playercardstyle" ></img></div><div v-else><p>Player Hand here - gamestate = {{gamestate}}</p></div>`,
        data(){
          return {
            playercardstyle: {
              width: '15vw',
              height: '20vh',
              padding: '0.5px'
            }
          }
        }
      });
      app.component('controlbar', {
        props: [],
        emits: ['playgame'],
        template: `<div><button :style="buttonstyle" @click="emitplaygame">Play Game</button></div>`,
        data(){
          return {
            buttonstyle: {
              width: '100%',
              height: '5vh'
            }
          }
        },
        methods: {
          emitplaygame() {
            this.$emit('playgame');
          }
        }
      });

      let vm = app.mount('#app');
    </script>
  </body>
</html>
